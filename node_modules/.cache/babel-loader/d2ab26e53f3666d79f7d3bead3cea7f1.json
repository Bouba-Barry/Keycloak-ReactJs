{"ast":null,"code":"import axios from 'axios';\nimport { getUser } from './auth_helper';\n\nconst _callApi = token => {\n  const headers = {\n    Accept: \"application/json\",\n    Authorization: \"Bearer \" + token,\n    'Access-Control-Allow-Origin': '*' // Ajoutez cette ligne pour spécifier l'origine autorisée\n\n  };\n  return axios.get(\"http://localhost:8081/api/products/\", {\n    headers\n  });\n};\n\nexport const callApi = async () => {\n  const user = await getUser();\n\n  if (user && user.access_token) {\n    console.log(\"access Token => \" + user.access_token);\n    return _callApi(user.access_token).catch(error => {\n      throw error;\n    });\n  } else {\n    throw new Error('user is not logged in');\n  }\n};","map":{"version":3,"sources":["/home/barry/JsWorkspace/ReactWorkspace/frontend-react/src/helpers/axios_helper.js"],"names":["axios","getUser","_callApi","token","headers","Accept","Authorization","get","callApi","user","access_token","console","log","catch","error","Error"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,OAAT,QAAwB,eAAxB;;AAGA,MAAMC,QAAQ,GAAIC,KAAD,IAAW;AACxB,QAAMC,OAAO,GAAG;AACZC,IAAAA,MAAM,EAAE,kBADI;AAEZC,IAAAA,aAAa,EAAE,YAAYH,KAFf;AAGZ,mCAA+B,GAHnB,CAGwB;;AAHxB,GAAhB;AAMA,SAAOH,KAAK,CAACO,GAAN,CAAU,qCAAV,EAAiD;AAACH,IAAAA;AAAD,GAAjD,CAAP;AACH,CARD;;AAUA,OAAO,MAAMI,OAAO,GAAG,YAAY;AAC/B,QAAMC,IAAI,GAAG,MAAMR,OAAO,EAA1B;;AACA,MAAIQ,IAAI,IAAIA,IAAI,CAACC,YAAjB,EAA+B;AAC3BC,IAAAA,OAAO,CAACC,GAAR,CAAY,qBAAmBH,IAAI,CAACC,YAApC;AACA,WAAOR,QAAQ,CAACO,IAAI,CAACC,YAAN,CAAR,CAA4BG,KAA5B,CAAkCC,KAAK,IAAI;AAC9C,YAAMA,KAAN;AACH,KAFM,CAAP;AAGH,GALD,MAKO;AACH,UAAM,IAAIC,KAAJ,CAAU,uBAAV,CAAN;AACH;AACJ,CAVM","sourcesContent":["import axios from 'axios';\nimport { getUser } from './auth_helper';\n\n\nconst _callApi = (token) => {\n    const headers = {\n        Accept: \"application/json\",\n        Authorization: \"Bearer \" + token,\n        'Access-Control-Allow-Origin': '*', // Ajoutez cette ligne pour spécifier l'origine autorisée\n    };\n\n    return axios.get(\"http://localhost:8081/api/products/\", {headers});\n}\n\nexport const callApi = async () => {\n    const user = await getUser();\n    if (user && user.access_token) {\n        console.log(\"access Token => \"+user.access_token);\n        return _callApi(user.access_token).catch(error => {\n            throw error;\n        });\n    } else {\n        throw new Error('user is not logged in');\n    }\n}\n"]},"metadata":{},"sourceType":"module"}